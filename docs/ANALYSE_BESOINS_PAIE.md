# üìã Analyse des Besoins - Logiciel de Paie Guin√©e

## ‚úÖ √âtat Actuel vs Besoins Exprim√©s

### 1. üîê INTERFACE DE CONNEXION

#### ‚úÖ D√©j√† Impl√©ment√©
- [x] Page de connexion fonctionnelle
- [x] Authentification utilisateur
- [x] Gestion des sessions
- [x] Profils utilisateurs avec niveaux d'acc√®s

#### ‚ùå √Ä Impl√©menter
- [ ] **Fen√™tre de configuration des param√®tres de paie**
  - [ ] P√©riode : D√©but, Fin, Mois en cours, Ann√©e, Date du jour
  - [ ] Param√®tres de paie : R√©gulation, Plafond des abattements
  - [ ] Rapport, Rapport TC
  - [ ] Suppression des salari√©s non pr√©sents en cl√¥ture annuelle
  - [ ] Gestion des historiques administratifs
  - [ ] Nombre maximum de rubriques composant
  - [ ] Type de bulletin par d√©faut
  - [ ] Type de paiement (Virement, Ch√®que, Esp√®ce)
  - [ ] Acomptes (R√©gulier, Exceptionnel)
  - [ ] Fichier de paie
  - [ ] Mod√©lisation comptable
  - [ ] Devise (GNF)
  - [ ] Rubriques (codes m√©mos des constantes, codes m√©mos des rubriques)
  - [ ] Constantes et Intitul√©s
  - [ ] Coordonn√©es de la soci√©t√©

---

### 2. üè† PAGE D'ACCUEIL

#### ‚úÖ D√©j√† Impl√©ment√©
- [x] Dashboard accessible
- [x] Statistiques de base
- [x] Navigation vers tous les modules

#### ‚ùå √Ä Impl√©menter
- [ ] Image de page d'accueil personnalisable
- [ ] Pr√©sentation de l'entreprise
- [ ] Acc√®s public (sans authentification)

---

### 3. üìã MENU LISTE

#### ‚úÖ D√©j√† Impl√©ment√©
- [x] **Cr√©ation d'un employ√©**
  - [x] √âtat civil : Matricule, Civilit√©, Nom de jeune fille
  - [x] Immatriculation : Date de naissance, Commune, Nationalit√©, D√©partement
  - [x] Contact, Informations professionnelles
- [x] Liste des employ√©s
- [x] Services
- [x] Postes
- [x] √âtablissements

#### ‚ùå √Ä Impl√©menter
- [ ] **Gestion de formation** (mod√®le existe, interface √† cr√©er)
- [ ] **Gestion de carri√®re** (mod√®le existe, interface √† cr√©er)
- [ ] **Gestion de temps** (mod√®le √† cr√©er)
- [ ] **Liste des constantes**
- [ ] **Liste des rubriques**
- [ ] **Liste des variables**
- [ ] **Liste de nature des √©v√©nements**
- [ ] **Liste des organisations**
- [ ] **Convention collective**
- [ ] **Caisse de cotisation**
- [ ] **Contrats sociaux**
- [ ] **Table des pr√™ts**
- [ ] **Mod√©lisation comptable**
- [ ] **Gestion des tables**

---

### 4. ‚öôÔ∏è GESTION

#### ‚úÖ D√©j√† Impl√©ment√©
- [x] Structure de base pour les modules

#### ‚ùå √Ä Impl√©menter
- [ ] **Bulletin de salaire**
  - [ ] Cr√©ation/Modification
  - [ ] Calcul automatique
  - [ ] G√©n√©ration PDF
  - [ ] Envoi email
- [ ] **Liste des absences**
- [ ] **Arr√™t de travail**
- [ ] **Acompte**
- [ ] **Pr√™t**
- [ ] **Enregistrement des heures**
- [ ] **Saisie en grille**
- [ ] **Calcul des bulletins**
- [ ] **Paiement**
- [ ] **Cl√¥ture**

---

### 5. üìä √âTATS (RAPPORTS)

#### ‚úÖ D√©j√† Impl√©ment√©
- [x] Dashboard avec graphiques
- [x] Rapports de base

#### ‚ùå √Ä Impl√©menter
- [ ] **Livre de paie**
- [ ] **Fiche individuelle**
- [ ] **Mouvement de personnel**
- [ ] **√âtat des absences**
- [ ] **Calendrier**
- [ ] **√âtat des cotisations** (CNSS, INAM, IRG)
- [ ] **√âtat des cumuls**
- [ ] **D√©claration des salaires**

---

## üìä R√©capitulatif de Conformit√©

### Modules Principaux

| Module | Sous-module | Statut | Priorit√© |
|--------|-------------|--------|----------|
| **1. Connexion** | Interface de base | ‚úÖ | - |
| | Configuration param√®tres paie | ‚ùå | üî¥ HAUTE |
| **2. Accueil** | Dashboard | ‚úÖ | - |
| | Page publique | ‚ùå | üü° MOYENNE |
| **3. Menu Liste** | Employ√©s | ‚úÖ | - |
| | Constantes | ‚ùå | üî¥ HAUTE |
| | Rubriques | ‚ùå | üî¥ HAUTE |
| | Variables | ‚ùå | üî¥ HAUTE |
| | Organisations | ‚úÖ | - |
| | Pr√™ts | ‚ùå | üü¢ BASSE |
| **4. Gestion** | Bulletin de salaire | ‚ùå | üî¥ HAUTE |
| | Absences | ‚ùå | üî¥ HAUTE |
| | Heures | ‚ùå | üî¥ HAUTE |
| | Acomptes | ‚ùå | üü° MOYENNE |
| | Pr√™ts | ‚ùå | üü° MOYENNE |
| | Cl√¥ture | ‚ùå | üî¥ HAUTE |
| **5. √âtats** | Livre de paie | ‚ùå | üî¥ HAUTE |
| | Cotisations | ‚ùå | üî¥ HAUTE |
| | D√©clarations | ‚ùå | üî¥ HAUTE |

### Taux de Conformit√© Global

```
Fonctionnalit√©s demand√©es : 45
Fonctionnalit√©s impl√©ment√©es : 8
Taux de conformit√© : 18%
```

---

## üéØ Plan d'Impl√©mentation Prioritaire

### Phase A : Param√©trage de Base (2 semaines)
**Objectif** : Mettre en place tous les param√®tres n√©cessaires au calcul de paie

1. **Mod√®les Django √† cr√©er**
   - `ParametrePaie` (p√©riodes, plafonds, types)
   - `Constante` (SMIG, plafonds, taux)
   - `RubriquePaie` (gains, retenues, cotisations)
   - `Variable` (variables de calcul)
   - `TrancheIRG` (bar√®me IRG)

2. **Interfaces √† cr√©er**
   - Fen√™tre de configuration param√®tres
   - Gestion des constantes
   - Gestion des rubriques
   - Gestion des variables
   - Configuration soci√©t√©

### Phase B : Temps de Travail (2 semaines)
**Objectif** : Collecter les donn√©es n√©cessaires au calcul

1. **Mod√®les**
   - `Pointage`
   - `Absence`
   - `ArretTravail`
   - `Conge`
   - `HeureSupplementaire`

2. **Interfaces**
   - Saisie des heures
   - Saisie en grille
   - Gestion des absences
   - Gestion des arr√™ts

### Phase C : Calcul de Paie (3 semaines)
**Objectif** : Moteur de calcul conforme l√©gislation guin√©enne

1. **Mod√®les**
   - `PeriodePaie`
   - `BulletinPaie`
   - `LigneBulletin`
   - `CumulPaie`

2. **Moteur de calcul**
   - Calcul salaire brut
   - Calcul CNSS (5% employ√©, 18% employeur)
   - Calcul INAM (2.5%)
   - Calcul IRG (bar√®me progressif)
   - Calcul net √† payer

3. **Interfaces**
   - Cr√©ation p√©riode
   - Calcul bulletins
   - Validation bulletins
   - G√©n√©ration PDF

### Phase D : Acomptes et Pr√™ts (1 semaine)
**Objectif** : Gestion des avances et pr√™ts

1. **Mod√®les**
   - `Acompte`
   - `Pret`
   - `EcheancePret`

2. **Interfaces**
   - Demande acompte
   - Gestion pr√™ts
   - √âch√©ancier

### Phase E : √âtats et Rapports (2 semaines)
**Objectif** : Tous les rapports l√©gaux

1. **Rapports**
   - Livre de paie
   - Fiche individuelle
   - √âtat des cotisations (CNSS, INAM, IRG)
   - D√©claration des salaires
   - √âtat des cumuls
   - Mouvement de personnel

2. **Exports**
   - PDF
   - Excel
   - XML (pour d√©clarations)

### Phase F : Cl√¥ture et Comptabilit√© (1 semaine)
**Objectif** : Cl√¥ture mensuelle et √©critures comptables

1. **Fonctionnalit√©s**
   - Cl√¥ture p√©riode
   - G√©n√©ration √©critures comptables
   - Export vers logiciel comptable
   - Archivage

---

## üìù Sp√©cifications Techniques D√©taill√©es

### 1. Configuration Param√®tres de Paie

```python
class ParametrePaie(models.Model):
    # P√©riode
    date_debut_periode = models.DateField()
    date_fin_periode = models.DateField()
    mois_en_cours = models.IntegerField()
    annee_en_cours = models.IntegerField()
    date_du_jour = models.DateField(auto_now=True)
    
    # Param√®tres
    regulation_active = models.BooleanField(default=True)
    plafond_abattement = models.DecimalField(max_digits=15, decimal_places=2)
    
    # Types
    type_bulletin_defaut = models.CharField(max_length=20)
    type_paiement_defaut = models.CharField(max_length=20)
    
    # Limites
    nombre_max_rubriques = models.IntegerField(default=100)
    
    # Devise
    devise = models.CharField(max_length=3, default='GNF')
```

### 2. Constantes de Paie

```python
class Constante(models.Model):
    code = models.CharField(max_length=20, unique=True)
    libelle = models.CharField(max_length=200)
    valeur = models.DecimalField(max_digits=15, decimal_places=4)
    type_valeur = models.CharField(max_length=20)  # Montant, Pourcentage
    date_debut = models.DateField()
    date_fin = models.DateField(null=True, blank=True)
    actif = models.BooleanField(default=True)
    
    # Exemples :
    # SMIG = 440000 GNF
    # PLAFOND_CNSS = 3000000 GNF
    # TAUX_CNSS_EMPLOYE = 5.00
    # TAUX_CNSS_EMPLOYEUR = 18.00
    # TAUX_INAM = 2.50
```

### 3. Rubriques de Paie

```python
class RubriquePaie(models.Model):
    code = models.CharField(max_length=20, unique=True)
    libelle = models.CharField(max_length=200)
    type_rubrique = models.CharField(max_length=20)  # GAIN, RETENUE, COTISATION
    nature = models.CharField(max_length=50)  # SALAIRE_BASE, PRIME, CNSS, IRG
    
    # Calcul
    formule = models.TextField(blank=True)
    base_calcul = models.CharField(max_length=50)
    taux = models.DecimalField(max_digits=8, decimal_places=4, null=True)
    montant_fixe = models.DecimalField(max_digits=15, decimal_places=2, null=True)
    plafond = models.DecimalField(max_digits=15, decimal_places=2, null=True)
    
    # Soumissions
    soumis_cnss = models.BooleanField(default=False)
    soumis_irg = models.BooleanField(default=False)
    soumis_inam = models.BooleanField(default=False)
    
    # Affichage
    ordre_calcul = models.IntegerField(default=100)
    ordre_affichage = models.IntegerField(default=100)
    affichage_bulletin = models.BooleanField(default=True)
    
    # Comptabilit√©
    compte_comptable = models.CharField(max_length=20, blank=True)
```

### 4. Variables de Paie

```python
class Variable(models.Model):
    code = models.CharField(max_length=20, unique=True)
    libelle = models.CharField(max_length=100)
    type_variable = models.CharField(max_length=20)  # NUMERIQUE, TEXTE, BOOLEEN
    portee = models.CharField(max_length=20)  # GLOBAL, EMPLOYE, PERIODE
    valeur_defaut = models.CharField(max_length=100, blank=True)
    
    # Exemples :
    # JOURS_MOIS = 22
    # HEURES_MOIS = 173.33
    # JOURS_CONGES = 26
```

### 5. Bulletin de Paie

```python
class BulletinPaie(models.Model):
    employe = models.ForeignKey(Employe, on_delete=models.PROTECT)
    periode = models.ForeignKey(PeriodePaie, on_delete=models.PROTECT)
    numero_bulletin = models.CharField(max_length=50, unique=True)
    
    # P√©riode
    mois_paie = models.IntegerField()
    annee_paie = models.IntegerField()
    
    # Temps
    jours_payes = models.DecimalField(max_digits=5, decimal_places=2)
    heures_normales = models.DecimalField(max_digits=8, decimal_places=2)
    heures_supplementaires = models.DecimalField(max_digits=8, decimal_places=2)
    
    # Montants
    salaire_brut = models.DecimalField(max_digits=15, decimal_places=2)
    base_cnss = models.DecimalField(max_digits=15, decimal_places=2)
    cnss_employe = models.DecimalField(max_digits=15, decimal_places=2)
    inam_employe = models.DecimalField(max_digits=15, decimal_places=2)
    base_irg = models.DecimalField(max_digits=15, decimal_places=2)
    irg = models.DecimalField(max_digits=15, decimal_places=2)
    net_a_payer = models.DecimalField(max_digits=15, decimal_places=2)
    
    # Charges patronales
    cnss_employeur = models.DecimalField(max_digits=15, decimal_places=2)
    
    # Statut
    statut = models.CharField(max_length=20, default='BROUILLON')
    date_calcul = models.DateTimeField(auto_now_add=True)
    date_validation = models.DateTimeField(null=True)
    date_paiement = models.DateField(null=True)
    
    # Paiement
    mode_paiement = models.CharField(max_length=20)  # VIREMENT, CHEQUE, ESPECE
    reference_paiement = models.CharField(max_length=100, blank=True)
```

---

## üîß Fonctionnalit√©s Sp√©cifiques Guin√©e

### Calcul CNSS
```python
def calculer_cnss(salaire_brut):
    PLAFOND_CNSS = 3000000  # GNF
    TAUX_EMPLOYE = 0.05  # 5%
    TAUX_EMPLOYEUR = 0.18  # 18%
    
    base_cnss = min(salaire_brut, PLAFOND_CNSS)
    cnss_employe = base_cnss * TAUX_EMPLOYE
    cnss_employeur = base_cnss * TAUX_EMPLOYEUR
    
    return base_cnss, cnss_employe, cnss_employeur
```

### Calcul INAM
```python
def calculer_inam(salaire_brut):
    PLAFOND_INAM = 3000000  # GNF
    TAUX_INAM = 0.025  # 2.5%
    
    base_inam = min(salaire_brut, PLAFOND_INAM)
    inam = base_inam * TAUX_INAM
    
    return inam
```

### Calcul IRG (Bar√®me Progressif)
```python
def calculer_irg(salaire_brut, cnss_employe, inam):
    # Base IRG = Brut - CNSS - INAM - Abattement
    ABATTEMENT = 0.20  # 20%
    PLAFOND_ABATTEMENT = 300000  # GNF
    
    abattement = min(salaire_brut * ABATTEMENT, PLAFOND_ABATTEMENT)
    base_irg = salaire_brut - cnss_employe - inam - abattement
    
    # Bar√®me progressif
    tranches = [
        (0, 1000000, 0.00),
        (1000001, 3000000, 0.05),
        (3000001, 6000000, 0.10),
        (6000001, 12000000, 0.15),
        (12000001, 25000000, 0.20),
        (25000001, float('inf'), 0.25)
    ]
    
    irg = 0
    for min_tranche, max_tranche, taux in tranches:
        if base_irg > min_tranche:
            montant_tranche = min(base_irg, max_tranche) - min_tranche
            irg += montant_tranche * taux
    
    return base_irg, irg
```

---

## üìÖ Planning d'Impl√©mentation

| Phase | Dur√©e | Priorit√© | D√©pendances |
|-------|-------|----------|-------------|
| A. Param√©trage | 2 sem | üî¥ HAUTE | Aucune |
| B. Temps de travail | 2 sem | üî¥ HAUTE | Phase A |
| C. Calcul paie | 3 sem | üî¥ HAUTE | Phases A, B |
| D. Acomptes/Pr√™ts | 1 sem | üü° MOYENNE | Phase C |
| E. √âtats/Rapports | 2 sem | üî¥ HAUTE | Phase C |
| F. Cl√¥ture | 1 sem | üî¥ HAUTE | Phase E |

**Dur√©e totale : 11 semaines (2,5 mois)**

---

## ‚úÖ Checklist de Validation

### Avant de commencer le d√©veloppement
- [ ] Valider les sp√©cifications avec l'utilisateur
- [ ] Confirmer les taux et plafonds 2025
- [ ] Obtenir des exemples de bulletins r√©els
- [ ] Valider le bar√®me IRG officiel
- [ ] Confirmer les formats de d√©clarations

### Pendant le d√©veloppement
- [ ] Tests unitaires pour chaque calcul
- [ ] Validation avec bulletins r√©els
- [ ] V√©rification conformit√© l√©gale
- [ ] Tests de performance

### Avant la mise en production
- [ ] Formation des utilisateurs
- [ ] Documentation compl√®te
- [ ] Migration des donn√©es
- [ ] Tests en conditions r√©elles

---

**Document cr√©√© le** : 21 Octobre 2025  
**Prochaine mise √† jour** : Apr√®s validation des sp√©cifications

üá¨üá≥ **Conforme √† la l√©gislation guin√©enne**
