{% extends "comptabilite/base_compta.html" %}
{% load i18n %}

{% block title %}Politique {{ politique.get_type_document_display }}{% endblock %}

{% block compta_content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-start mb-4">
        <div>
            <h1 class="h3 mb-1"><i class="bi bi-clock-history me-2"></i>{{ politique.get_type_document_display }}</h1>
            <p class="text-muted mb-0">Politique de rétention</p>
        </div>
        <div class="btn-group">
            <a href="{% url 'comptabilite:archivage_politique_update' politique.pk %}" class="btn btn-primary"><i class="bi bi-pencil me-1"></i>Modifier</a>
            <a href="{% url 'comptabilite:archivage_politiques' %}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left me-1"></i>Retour</a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header"><h5 class="card-title mb-0">Informations</h5></div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr><th class="text-muted" width="40%">Durée conservation</th><td><span class="badge bg-primary fs-6">{{ politique.duree_conservation_annees }} ans</span></td></tr>
                        <tr><th class="text-muted">Base légale</th><td>{{ politique.get_base_legale_display }}</td></tr>
                        <tr><th class="text-muted">Référence</th><td>{{ politique.reference_legale|default:"-" }}</td></tr>
                        <tr><th class="text-muted">Action expiration</th><td>
                            {% if politique.action_expiration == 'archiver' %}
                            <span class="badge bg-info">Archiver définitivement</span>
                            {% elif politique.action_expiration == 'detruire' %}
                            <span class="badge bg-danger">Détruire</span>
                            {% else %}
                            <span class="badge bg-warning text-dark">Réviser</span>
                            {% endif %}
                        </td></tr>
                        <tr><th class="text-muted">Alerte avant</th><td>{{ politique.alerte_avant_expiration_jours }} jours</td></tr>
                        <tr><th class="text-muted">Statut</th><td>{% if politique.est_actif %}<span class="badge bg-success">Actif</span>{% else %}<span class="badge bg-secondary">Inactif</span>{% endif %}</td></tr>
                    </table>
                    {% if politique.description %}
                    <hr>
                    <p>{{ politique.description }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card">
                <div class="card-header"><h5 class="card-title mb-0">Audit</h5></div>
                <div class="card-body">
                    <p class="mb-1"><strong>Créé le:</strong> {{ politique.date_creation|date:"d/m/Y H:i" }}</p>
                    <p class="mb-0"><strong>Modifié le:</strong> {{ politique.date_modification|date:"d/m/Y H:i" }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
