# Generated by Django 5.2.7 on 2026-01-20 11:00

import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('comptabilite', '0001_initial'),
        ('core', '0011_add_expatrie_fields'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AnalyseComparative',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('valeur_actuelle', models.DecimalField(decimal_places=2, max_digits=15)),
                ('valeur_precedente', models.DecimalField(decimal_places=2, max_digits=15)),
                ('variation_absolue', models.DecimalField(decimal_places=2, max_digits=15)),
                ('variation_pourcentage', models.DecimalField(decimal_places=2, max_digits=6)),
                ('date_analyse', models.DateTimeField(auto_now_add=True)),
                ('compte', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.plancomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analyses_comparatives', to='core.entreprise')),
                ('exercice_actuel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analyses_actuel', to='comptabilite.exercicecomptable')),
                ('exercice_precedent', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analyses_precedent', to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Analyse comparative',
                'verbose_name_plural': 'Analyses comparatives',
                'db_table': 'analyses_comparatives',
            },
        ),
        migrations.CreateModel(
            name='AnalyseImpayes',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('montant_impaye', models.DecimalField(decimal_places=2, max_digits=15)),
                ('jours_retard', models.IntegerField()),
                ('raison_impaye', models.CharField(blank=True, max_length=200, null=True)),
                ('action_prevue', models.CharField(blank=True, max_length=200, null=True)),
                ('date_relance', models.DateField(blank=True, null=True)),
                ('date_analyse', models.DateTimeField(auto_now_add=True)),
                ('facture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analyses_impayes', to='comptabilite.facture')),
            ],
            options={
                'verbose_name': 'Analyse impayé',
                'verbose_name_plural': 'Analyses impayés',
                'db_table': 'analyses_impayes',
            },
        ),
        migrations.CreateModel(
            name='APIINTEGRATION',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nom', models.CharField(max_length=200)),
                ('type_integration', models.CharField(max_length=100)),
                ('url_base', models.URLField()),
                ('token_auth', models.CharField(blank=True, max_length=500, null=True)),
                ('est_actif', models.BooleanField(default=True)),
                ('dernier_sync', models.DateTimeField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='api_integrations', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'API intégration',
                'verbose_name_plural': 'API intégrations',
                'db_table': 'api_integrations',
            },
        ),
        migrations.CreateModel(
            name='Budget',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('libelle', models.CharField(max_length=200)),
                ('montant_total', models.DecimalField(decimal_places=2, max_digits=15)),
                ('statut', models.CharField(choices=[('brouillon', 'Brouillon'), ('approuve', 'Approuvé'), ('en_cours', "En cours d'exécution"), ('cloture', 'Clôturé')], default='brouillon', max_length=20)),
                ('date_approbation', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('approuve_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='budgets', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='budgets', to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Budget',
                'verbose_name_plural': 'Budgets',
                'db_table': 'budgets',
            },
        ),
        migrations.CreateModel(
            name='CentreAnalyse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50, unique=True)),
                ('libelle', models.CharField(max_length=200)),
                ('type_centre', models.CharField(choices=[('cout', 'Centre de coût'), ('profit', 'Centre de profit')], max_length=20)),
                ('budget_annuel', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('est_actif', models.BooleanField(default=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='centres_analyse', to='core.entreprise')),
                ('responsable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Centre analyse',
                'verbose_name_plural': 'Centres analyse',
                'db_table': 'centres_analyse',
            },
        ),
        migrations.CreateModel(
            name='CompteBancaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50, verbose_name='Code compte')),
                ('libelle', models.CharField(max_length=200)),
                ('iban', models.CharField(blank=True, max_length=50, null=True)),
                ('bic', models.CharField(blank=True, max_length=20, null=True)),
                ('banque', models.CharField(max_length=200)),
                ('solde_initial', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('est_actif', models.BooleanField(default=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('compte_comptable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.plancomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comptes_bancaires', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Compte bancaire',
                'verbose_name_plural': 'Comptes bancaires',
                'db_table': 'comptes_bancaires',
            },
        ),
        migrations.CreateModel(
            name='CompteClientDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_premiere_achat', models.DateField(blank=True, null=True)),
                ('montant_total_achat', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('solde_courant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('limite_credit', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('taux_remise_habituel', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('conditions_paiement', models.CharField(blank=True, max_length=100, null=True)),
                ('tiers', models.OneToOneField(limit_choices_to={'type_tiers__in': ['client', 'mixte']}, on_delete=django.db.models.deletion.CASCADE, related_name='compte_detail', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Compte client détaillé',
                'verbose_name_plural': 'Comptes clients détaillés',
                'db_table': 'comptes_clients_detail',
            },
        ),
        migrations.CreateModel(
            name='CompteFournisseurDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_premiere_facture', models.DateField(blank=True, null=True)),
                ('montant_total_achat', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('solde_courant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('delai_paiement_jours', models.IntegerField(default=30)),
                ('taux_remise_habituel', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5)),
                ('termes_paiement', models.CharField(blank=True, max_length=100, null=True)),
                ('tiers', models.OneToOneField(limit_choices_to={'type_tiers__in': ['fournisseur', 'mixte']}, on_delete=django.db.models.deletion.CASCADE, related_name='compte_fournisseur_detail', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Compte fournisseur détaillé',
                'verbose_name_plural': 'Comptes fournisseurs détaillés',
                'db_table': 'comptes_fournisseurs_detail',
            },
        ),
        migrations.CreateModel(
            name='ConsolidationComptes',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('pourcentage_participation', models.DecimalField(decimal_places=2, default=Decimal('100.00'), max_digits=5)),
                ('date_consolidation', models.DateTimeField(auto_now_add=True)),
                ('entreprise_fille', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='consolidations_fille', to='core.entreprise')),
                ('entreprise_mere', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='consolidations_mere', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='consolidations', to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Consolidation',
                'verbose_name_plural': 'Consolidations',
                'db_table': 'consolidations',
            },
        ),
        migrations.CreateModel(
            name='DeclarationFiscale',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_declaration', models.CharField(choices=[('irpp', 'IRPP'), ('is', 'Impôt sur les Sociétés'), ('patente', 'Patente'), ('autre', 'Autre')], max_length=20)),
                ('base_imposable', models.DecimalField(decimal_places=2, max_digits=15)),
                ('taux_imposition', models.DecimalField(decimal_places=2, max_digits=5)),
                ('montant_impot', models.DecimalField(decimal_places=2, max_digits=15)),
                ('statut', models.CharField(choices=[('brouillon', 'Brouillon'), ('declaree', 'Déclarée'), ('payee', 'Payée')], default='brouillon', max_length=20)),
                ('date_declaration', models.DateField(blank=True, null=True)),
                ('montant_paye', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_paiement', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='declarations_fiscales', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Déclaration fiscale',
                'verbose_name_plural': 'Déclarations fiscales',
                'db_table': 'declarations_fiscales',
            },
        ),
        migrations.CreateModel(
            name='DeclarationTVA',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('periode', models.CharField(choices=[('mensuelle', 'Mensuelle'), ('trimestrielle', 'Trimestrielle')], max_length=20)),
                ('date_debut', models.DateField()),
                ('date_fin', models.DateField()),
                ('tva_collectee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('tva_deductible', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('tva_a_payer', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('statut', models.CharField(choices=[('brouillon', 'Brouillon'), ('declaree', 'Déclarée'), ('payee', 'Payée')], default='brouillon', max_length=20)),
                ('date_declaration', models.DateField(blank=True, null=True)),
                ('montant_paye', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_paiement', models.DateField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='declarations_tva', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Déclaration TVA',
                'verbose_name_plural': 'Déclarations TVA',
                'db_table': 'declarations_tva',
            },
        ),
        migrations.CreateModel(
            name='EditionFiscale',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_edition', models.CharField(max_length=100)),
                ('date_generation', models.DateTimeField(auto_now_add=True)),
                ('fichier', models.FileField(upload_to='editions_fiscales/')),
                ('validee', models.BooleanField(default=False)),
                ('date_validation', models.DateTimeField(blank=True, null=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='editions_fiscales', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.exercicecomptable')),
                ('validee_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Édition fiscale',
                'verbose_name_plural': 'Éditions fiscales',
                'db_table': 'editions_fiscales',
            },
        ),
        migrations.CreateModel(
            name='ExportDonnees',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_export', models.CharField(choices=[('factures', 'Factures'), ('ecritures', 'Écritures'), ('tiers', 'Tiers'), ('autres', 'Autres')], max_length=20)),
                ('format_export', models.CharField(choices=[('xml', 'XML'), ('edi', 'EDI'), ('csv', 'CSV'), ('json', 'JSON')], max_length=10)),
                ('date_export', models.DateTimeField(auto_now_add=True)),
                ('fichier', models.FileField(upload_to='exports/')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exports', to='core.entreprise')),
                ('utilisateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Export données',
                'verbose_name_plural': 'Exports données',
                'db_table': 'exports_donnees',
            },
        ),
        migrations.CreateModel(
            name='FluxTresorerie',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('flux_exploitation', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('flux_investissement', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('flux_financement', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('variation_nette', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_calcul', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='flux_tresorerie', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='flux', to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Flux trésorerie',
                'verbose_name_plural': 'Flux trésorerie',
                'db_table': 'flux_tresorerie',
            },
        ),
        migrations.CreateModel(
            name='Immobilisation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero', models.CharField(max_length=50, unique=True, verbose_name='N° Immobilisation')),
                ('designation', models.CharField(max_length=200)),
                ('categorie', models.CharField(choices=[('terrain', 'Terrains'), ('construction', 'Constructions'), ('materiel', 'Matériel'), ('mobilier', 'Mobilier'), ('informatique', 'Informatique'), ('vehicule', 'Véhicules'), ('autre', 'Autre')], max_length=20)),
                ('date_acquisition', models.DateField(verbose_name='Date acquisition')),
                ('valeur_acquisition', models.DecimalField(decimal_places=2, max_digits=15)),
                ('lieu', models.CharField(blank=True, max_length=200, null=True)),
                ('duree_vie_ans', models.IntegerField(default=5, verbose_name='Durée de vie (années)')),
                ('mode_amortissement', models.CharField(choices=[('lineaire', 'Linéaire'), ('degressif', 'Dégressif')], default='lineaire', max_length=20)),
                ('est_actif', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('compte_amortissement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='amortissements_immo', to='comptabilite.plancomptable')),
                ('compte_immobilisation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='immobilisations', to='comptabilite.plancomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='immobilisations', to='core.entreprise')),
                ('fournisseur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Immobilisation',
                'verbose_name_plural': 'Immobilisations',
                'db_table': 'immobilisations',
                'ordering': ['-date_acquisition'],
            },
        ),
        migrations.CreateModel(
            name='CessionImmobilisation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_sortie', models.CharField(choices=[('vente', 'Vente'), ('rebut', 'Mise au rebut'), ('echange', 'Échange'), ('don', 'Don')], max_length=20)),
                ('date_sortie', models.DateField(verbose_name='Date sortie')),
                ('prix_vente', models.DecimalField(blank=True, decimal_places=2, default=Decimal('0.00'), max_digits=15, null=True)),
                ('resultat_cession', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Plus ou moins-value', max_digits=15)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('acheteur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.tiers')),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('immobilisation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cessions', to='comptabilite.immobilisation')),
            ],
            options={
                'verbose_name': 'Cession immobilisation',
                'verbose_name_plural': 'Cessions immobilisations',
                'db_table': 'cessions_immobilisations',
            },
        ),
        migrations.CreateModel(
            name='ImportReleve',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('fichier', models.FileField(upload_to='imports_releves/')),
                ('date_import', models.DateTimeField(auto_now_add=True)),
                ('nombre_operations', models.IntegerField(default=0)),
                ('nombre_operations_acceptees', models.IntegerField(default=0)),
                ('statut_import', models.CharField(default='en_cours', max_length=20)),
                ('compte_bancaire', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='imports', to='comptabilite.comptebancaire')),
                ('utilisateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Import relevé',
                'verbose_name_plural': 'Imports relevés',
                'db_table': 'imports_releves',
            },
        ),
        migrations.CreateModel(
            name='InterfaceEDI',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code_edi', models.CharField(max_length=50, unique=True)),
                ('format_edi', models.CharField(choices=[('unedifact', 'UNEDIFACT'), ('x12', 'X12'), ('autre', 'Autre')], max_length=20)),
                ('est_actif', models.BooleanField(default=True)),
                ('donnees_config', models.TextField(blank=True, help_text='Configuration JSON', null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('tiers', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='interfaces_edi', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Interface EDI',
                'verbose_name_plural': 'Interfaces EDI',
                'db_table': 'interfaces_edi',
            },
        ),
        migrations.CreateModel(
            name='Inventaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero', models.CharField(max_length=50, verbose_name='N° Inventaire')),
                ('date_inventaire', models.DateField()),
                ('statut', models.CharField(choices=[('en_cours', 'En cours'), ('termine', 'Terminé'), ('valide', 'Validé')], default='en_cours', max_length=20)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventaires', to='core.entreprise')),
                ('responsable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Inventaire',
                'verbose_name_plural': 'Inventaires',
                'db_table': 'inventaires',
            },
        ),
        migrations.CreateModel(
            name='LogModification',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ancienne_valeur', models.TextField()),
                ('nouvelle_valeur', models.TextField()),
                ('champ_modifie', models.CharField(max_length=100)),
                ('date_modification', models.DateTimeField(auto_now_add=True)),
                ('ecriture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='logs_modifications', to='comptabilite.ecriturecomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='logs_modification', to='core.entreprise')),
                ('utilisateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Log modification',
                'verbose_name_plural': 'Logs modifications',
                'db_table': 'logs_modifications',
            },
        ),
        migrations.CreateModel(
            name='ModeleEcriture',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50, unique=True)),
                ('libelle', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('est_actif', models.BooleanField(default=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='modeles_ecritures', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Modèle écriture',
                'verbose_name_plural': 'Modèles écritures',
                'db_table': 'modeles_ecritures',
            },
        ),
        migrations.CreateModel(
            name='LigneModeleEcriture',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_ligne', models.IntegerField()),
                ('type_montant', models.CharField(choices=[('debit', 'Débit'), ('credit', 'Crédit')], max_length=10)),
                ('montant_fixe', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('est_montant_variable', models.BooleanField(default=False)),
                ('compte', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.plancomptable')),
                ('modele', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='comptabilite.modeleecriture')),
            ],
            options={
                'verbose_name': 'Ligne modèle écriture',
                'verbose_name_plural': 'Lignes modèles écritures',
                'db_table': 'lignes_modeles_ecritures',
            },
        ),
        migrations.CreateModel(
            name='OperationBancaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_operation', models.DateField()),
                ('description', models.CharField(max_length=200)),
                ('montant', models.DecimalField(decimal_places=2, max_digits=15)),
                ('type_operation', models.CharField(choices=[('debit', 'Débit'), ('credit', 'Crédit')], max_length=20)),
                ('lettrage_id', models.CharField(blank=True, max_length=50, null=True)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
            ],
            options={
                'verbose_name': 'Opération bancaire',
                'verbose_name_plural': 'Opérations bancaires',
                'db_table': 'operations_bancaires',
            },
        ),
        migrations.CreateModel(
            name='LettrageOperation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_lettrage', models.DateTimeField(auto_now_add=True)),
                ('ecriture', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='lettrage_bancaire', to='comptabilite.ecriturecomptable')),
                ('operation_bancaire', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='lettrage', to='comptabilite.operationbancaire')),
            ],
            options={
                'verbose_name': 'Lettrage opération',
                'verbose_name_plural': 'Lettrages opérations',
                'db_table': 'lettrages_operations',
            },
        ),
        migrations.CreateModel(
            name='OperationEnDevise',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('montant_devise', models.DecimalField(decimal_places=2, max_digits=15)),
                ('taux_change', models.DecimalField(decimal_places=4, max_digits=10)),
                ('montant_local', models.DecimalField(decimal_places=2, max_digits=15)),
                ('difference_change', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_operation', models.DateField()),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('devise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.devise')),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('tiers', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='operations_devise', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Opération en devise',
                'verbose_name_plural': 'Opérations en devises',
                'db_table': 'operations_devise',
            },
        ),
        migrations.CreateModel(
            name='DifferenceChange',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('montant_realise', models.DecimalField(decimal_places=2, max_digits=15)),
                ('montant_provision', models.DecimalField(decimal_places=2, max_digits=15)),
                ('type_difference', models.CharField(choices=[('gain', 'Gain'), ('perte', 'Perte')], max_length=20)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('operation_devise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='differences_change', to='comptabilite.operationendevise')),
            ],
            options={
                'verbose_name': 'Différence change',
                'verbose_name_plural': 'Différences change',
                'db_table': 'differences_change',
            },
        ),
        migrations.CreateModel(
            name='Placement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50)),
                ('designation', models.CharField(max_length=200)),
                ('type_placement', models.CharField(choices=[('action', 'Action'), ('obligation', 'Obligation'), ('fonds', 'Fonds commun de placement'), ('titre', 'Titre'), ('autre', 'Autre')], max_length=20)),
                ('date_acquisition', models.DateField()),
                ('cout_acquisition', models.DecimalField(decimal_places=2, max_digits=15)),
                ('quantite', models.DecimalField(decimal_places=2, max_digits=15)),
                ('prix_unitaire_actuel', models.DecimalField(decimal_places=2, max_digits=15)),
                ('valeur_actuelle', models.DecimalField(decimal_places=2, max_digits=15)),
                ('resultat_non_realise', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('taux_rendement', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('date_maj', models.DateTimeField(auto_now=True)),
                ('compte_comptable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.plancomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='placements', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Placement',
                'verbose_name_plural': 'Placements',
                'db_table': 'placements',
            },
        ),
        migrations.CreateModel(
            name='RapprochementBancaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_rapprochement', models.DateField()),
                ('solde_bancaire', models.DecimalField(decimal_places=2, max_digits=15)),
                ('solde_comptable', models.DecimalField(decimal_places=2, max_digits=15)),
                ('ecart', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('statut', models.CharField(choices=[('en_cours', 'En cours'), ('termine', 'Terminé'), ('valide', 'Validé')], default='en_cours', max_length=20)),
                ('date_validation', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('compte_bancaire', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='rapprochements', to='comptabilite.comptebancaire')),
                ('responsable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Rapprochement bancaire',
                'verbose_name_plural': 'Rapprochements bancaires',
                'db_table': 'rapprochements_bancaires',
            },
        ),
        migrations.CreateModel(
            name='EcartBancaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_ecart', models.CharField(choices=[('frais', 'Frais bancaires'), ('interet', 'Intérêts'), ('erreur', 'Erreur de saisie'), ('retard', 'Retard de compensation'), ('autre', 'Autre')], max_length=20)),
                ('montant', models.DecimalField(decimal_places=2, max_digits=15)),
                ('description', models.TextField()),
                ('est_resolu', models.BooleanField(default=False)),
                ('date_resolution', models.DateTimeField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('compte_comptable', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.plancomptable')),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('rapprochement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ecarts', to='comptabilite.rapprochementbancaire')),
            ],
            options={
                'verbose_name': 'Écart bancaire',
                'verbose_name_plural': 'Écarts bancaires',
                'db_table': 'ecarts_bancaires',
            },
        ),
        migrations.CreateModel(
            name='RatioFinancier',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_ratio', models.CharField(choices=[('liquidite', 'Liquidité'), ('solvabilite', 'Solvabilité'), ('rentabilite', 'Rentabilité'), ('activite', 'Activité'), ('endettement', 'Endettement')], max_length=20)),
                ('nom', models.CharField(max_length=100)),
                ('valeur', models.DecimalField(decimal_places=2, max_digits=10)),
                ('formule', models.CharField(blank=True, help_text='Formule de calcul', max_length=200, null=True)),
                ('interprtation', models.TextField(blank=True, null=True)),
                ('date_calcul', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ratios_financiers', to='core.entreprise')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ratios', to='comptabilite.exercicecomptable')),
            ],
            options={
                'verbose_name': 'Ratio financier',
                'verbose_name_plural': 'Ratios financiers',
                'db_table': 'ratios_financiers',
            },
        ),
        migrations.CreateModel(
            name='RecapitulatifTVA',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('operation', models.CharField(max_length=100)),
                ('montant_ht', models.DecimalField(decimal_places=2, max_digits=15)),
                ('taux_tva', models.DecimalField(decimal_places=2, max_digits=5)),
                ('montant_tva', models.DecimalField(decimal_places=2, max_digits=15)),
                ('declaration', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='recapitulatifs', to='comptabilite.declarationtva')),
            ],
            options={
                'verbose_name': 'Récapitulatif TVA',
                'verbose_name_plural': 'Récapitulatifs TVA',
                'db_table': 'recapitulatifs_tva',
            },
        ),
        migrations.CreateModel(
            name='ReeevaluationDevise',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_reevaluation', models.DateField()),
                ('montant_devise', models.DecimalField(decimal_places=2, max_digits=15)),
                ('ancien_taux', models.DecimalField(decimal_places=4, max_digits=10)),
                ('nouveau_taux', models.DecimalField(decimal_places=4, max_digits=10)),
                ('ancien_montant_local', models.DecimalField(decimal_places=2, max_digits=15)),
                ('nouveau_montant_local', models.DecimalField(decimal_places=2, max_digits=15)),
                ('difference_reevaluation', models.DecimalField(decimal_places=2, max_digits=15)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('devise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.devise')),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('tiers', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reevaluations', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Réévaluation devise',
                'verbose_name_plural': 'Réévaluations devises',
                'db_table': 'reevaluations_devise',
            },
        ),
        migrations.CreateModel(
            name='ReleveBancaire',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero', models.CharField(max_length=50, verbose_name='N° Relevé')),
                ('date_debut', models.DateField()),
                ('date_fin', models.DateField()),
                ('solde_initial', models.DecimalField(decimal_places=2, max_digits=15)),
                ('solde_final', models.DecimalField(decimal_places=2, max_digits=15)),
                ('fichier', models.FileField(blank=True, null=True, upload_to='releves_bancaires/')),
                ('date_import', models.DateTimeField(auto_now_add=True)),
                ('compte_bancaire', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='releves', to='comptabilite.comptebancaire')),
            ],
            options={
                'verbose_name': 'Relevé bancaire',
                'verbose_name_plural': 'Relevés bancaires',
                'db_table': 'releves_bancaires',
            },
        ),
        migrations.AddField(
            model_name='operationbancaire',
            name='releve',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='operations', to='comptabilite.relevebancaire'),
        ),
        migrations.CreateModel(
            name='RetenuAlaSource',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_retenue', models.CharField(choices=[('prestataire', 'Retenue prestataire'), ('dividende', 'Retenue dividende'), ('interet', 'Retenue intérêt'), ('autre', 'Autre retenue')], max_length=20)),
                ('montant_brut', models.DecimalField(decimal_places=2, max_digits=15)),
                ('taux_retenue', models.DecimalField(decimal_places=2, max_digits=5)),
                ('montant_retenu', models.DecimalField(decimal_places=2, max_digits=15)),
                ('montant_net', models.DecimalField(decimal_places=2, max_digits=15)),
                ('date_retenue', models.DateField()),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('tiers', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='retenues', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Retenue à la source',
                'verbose_name_plural': 'Retenues à la source',
                'db_table': 'retenues_source',
            },
        ),
        migrations.CreateModel(
            name='SegmentAnalytique',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50)),
                ('libelle', models.CharField(max_length=200)),
                ('type_segment', models.CharField(choices=[('produit', 'Produit'), ('client', 'Client'), ('region', 'Région'), ('departement', 'Département'), ('autre', 'Autre')], max_length=20)),
                ('est_actif', models.BooleanField(default=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='segments_analytiques', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Segment analytique',
                'verbose_name_plural': 'Segments analytiques',
                'db_table': 'segments_analytiques',
                'unique_together': {('entreprise', 'code')},
            },
        ),
        migrations.CreateModel(
            name='ComptabiliteAnalytique',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('montant_debit', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('montant_credit', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('pourcentage_imputation', models.DecimalField(decimal_places=2, default=Decimal('100.00'), max_digits=5)),
                ('centre_analyse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.centreanalyse')),
                ('ecriture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analytique', to='comptabilite.ecriturecomptable')),
                ('segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.segmentanalytique')),
            ],
            options={
                'verbose_name': 'Comptabilité analytique',
                'verbose_name_plural': 'Comptabilité analytique',
                'db_table': 'comptabilite_analytique',
            },
        ),
        migrations.CreateModel(
            name='Stock',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='Code article')),
                ('designation', models.CharField(max_length=200)),
                ('unite', models.CharField(default='Unité', max_length=20)),
                ('quantite_stock', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('quantite_reservee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('prix_unitaire_moyen', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('valeur_stock', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('stock_minimum', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('stock_maximum', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('est_actif', models.BooleanField(default=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('compte_stock', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.plancomptable')),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stocks', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Stock',
                'verbose_name_plural': 'Stocks',
                'db_table': 'stocks',
            },
        ),
        migrations.CreateModel(
            name='AjustementStock',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ancienne_quantite', models.DecimalField(decimal_places=2, max_digits=15)),
                ('nouvelle_quantite', models.DecimalField(decimal_places=2, max_digits=15)),
                ('motif', models.CharField(max_length=200)),
                ('date_approbation', models.DateTimeField(blank=True, null=True)),
                ('date_ajustement', models.DateTimeField(auto_now_add=True)),
                ('approuve_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('stock', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ajustements', to='comptabilite.stock')),
            ],
            options={
                'verbose_name': 'Ajustement stock',
                'verbose_name_plural': 'Ajustements stocks',
                'db_table': 'ajustements_stocks',
            },
        ),
        migrations.CreateModel(
            name='VariationStock',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('type_variation', models.CharField(choices=[('entree', 'Entrée'), ('sortie', 'Sortie'), ('ajustement', 'Ajustement'), ('transfert', 'Transfert')], max_length=20)),
                ('quantite', models.DecimalField(decimal_places=2, max_digits=15)),
                ('montant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_variation', models.DateField()),
                ('reference', models.CharField(blank=True, max_length=100, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('stock', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='variations', to='comptabilite.stock')),
            ],
            options={
                'verbose_name': 'Variation stock',
                'verbose_name_plural': 'Variations stocks',
                'db_table': 'variations_stocks',
            },
        ),
        migrations.CreateModel(
            name='VerrouillageExercice',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('est_verroui', models.BooleanField(default=False)),
                ('date_verrouillage', models.DateTimeField(blank=True, null=True)),
                ('raison_verrouillage', models.TextField(blank=True, null=True)),
                ('exercice', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='verrouillage', to='comptabilite.exercicecomptable')),
                ('verroui_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Verrouillé par')),
            ],
            options={
                'verbose_name': 'Verrouillage exercice',
                'verbose_name_plural': 'Verrouillages exercices',
                'db_table': 'verrouillages_exercices',
            },
        ),
        migrations.CreateModel(
            name='VieillissementCreances',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('categorie', models.CharField(choices=[('courant', 'Courant'), ('30j', '30 jours'), ('60j', '60 jours'), ('90j', '90 jours'), ('plus90j', '+90 jours')], max_length=20)),
                ('montant', models.DecimalField(decimal_places=2, max_digits=15)),
                ('date_facture', models.DateField()),
                ('date_echeance', models.DateField()),
                ('date_calcul', models.DateField(auto_now_add=True)),
                ('facture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.facture')),
                ('tiers', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vieillissements', to='comptabilite.tiers')),
            ],
            options={
                'verbose_name': 'Vieillissement créances',
                'verbose_name_plural': 'Vieillissements créances',
                'db_table': 'vieillissements_creances',
            },
        ),
        migrations.CreateModel(
            name='Approbation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('niveau', models.IntegerField(choices=[(1, 'Niveau 1'), (2, 'Niveau 2'), (3, 'Niveau 3')])),
                ('statut', models.CharField(choices=[('en_attente', 'En attente'), ('approuvee', 'Approuvée'), ('rejetee', 'Rejetée')], default='en_attente', max_length=20)),
                ('date_approbation', models.DateTimeField(blank=True, null=True)),
                ('commentaire', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('approbateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('ecriture', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='approbations', to='comptabilite.ecriturecomptable')),
            ],
            options={
                'verbose_name': 'Approbation',
                'verbose_name_plural': 'Approbations',
                'db_table': 'approbations',
                'ordering': ['niveau'],
                'unique_together': {('ecriture', 'niveau')},
            },
        ),
        migrations.CreateModel(
            name='GestionDeviseCompte',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('solde_devise', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('taux_change_dernier', models.DecimalField(decimal_places=4, max_digits=10)),
                ('date_dernier_update', models.DateTimeField(auto_now=True)),
                ('compte', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='devises_compte', to='comptabilite.plancomptable')),
                ('devise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.devise')),
            ],
            options={
                'verbose_name': 'Compte en devise',
                'verbose_name_plural': 'Comptes en devises',
                'db_table': 'gestion_devises_comptes',
                'unique_together': {('compte', 'devise')},
            },
        ),
        migrations.CreateModel(
            name='Amortissement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('taux_amortissement', models.DecimalField(decimal_places=2, default=Decimal('20.00'), max_digits=5)),
                ('montant_amortissement', models.DecimalField(decimal_places=2, max_digits=15)),
                ('montant_cumule', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('date_enregistrement', models.DateField(auto_now_add=True)),
                ('ecriture', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='comptabilite.ecriturecomptable')),
                ('exercice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='amortissements', to='comptabilite.exercicecomptable')),
                ('immobilisation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='amortissements', to='comptabilite.immobilisation')),
            ],
            options={
                'verbose_name': 'Amortissement',
                'verbose_name_plural': 'Amortissements',
                'db_table': 'amortissements',
                'unique_together': {('immobilisation', 'exercice')},
            },
        ),
        migrations.CreateModel(
            name='LigneBudget',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('montant_budget', models.DecimalField(decimal_places=2, max_digits=15)),
                ('montant_realise', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('budget', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='comptabilite.budget')),
                ('compte', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.plancomptable')),
            ],
            options={
                'verbose_name': 'Ligne budget',
                'verbose_name_plural': 'Lignes budgets',
                'db_table': 'lignes_budgets',
                'unique_together': {('budget', 'compte')},
            },
        ),
        migrations.CreateModel(
            name='PisteAudit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('create', 'Création'), ('update', 'Modification'), ('delete', 'Suppression'), ('validation', 'Validation'), ('cloture', 'Clôture')], max_length=20)),
                ('module', models.CharField(max_length=100)),
                ('type_objet', models.CharField(max_length=100)),
                ('id_objet', models.CharField(max_length=100)),
                ('donnees_anterieres', models.TextField(blank=True, null=True)),
                ('donnees_nouvelles', models.TextField(blank=True, null=True)),
                ('adresse_ip', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('date_action', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='piste_audit', to='core.entreprise')),
                ('utilisateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Piste audit',
                'verbose_name_plural': 'Piste audit',
                'db_table': 'piste_audit',
                'ordering': ['-date_action'],
                'indexes': [models.Index(fields=['entreprise', '-date_action'], name='piste_audit_entrepr_a8b9c4_idx'), models.Index(fields=['utilisateur', '-date_action'], name='piste_audit_utilisa_9e3e85_idx')],
            },
        ),
        migrations.CreateModel(
            name='PrevisionTresorerie',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('mois', models.DateField(verbose_name='Mois de prévision')),
                ('solde_initial', models.DecimalField(decimal_places=2, max_digits=15)),
                ('entrees_prevues', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('sorties_prevues', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('solde_prevu', models.DecimalField(decimal_places=2, max_digits=15)),
                ('solde_reel', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('ecart', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='previsions_tresorerie', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Prévision trésorerie',
                'verbose_name_plural': 'Prévisions trésorerie',
                'db_table': 'previsions_tresorerie',
                'unique_together': {('entreprise', 'mois')},
            },
        ),
        migrations.CreateModel(
            name='LigneInventaire',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantite_theorique', models.DecimalField(decimal_places=2, max_digits=15)),
                ('quantite_comptee', models.DecimalField(decimal_places=2, max_digits=15)),
                ('inventaire', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='comptabilite.inventaire')),
                ('stock', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='comptabilite.stock')),
            ],
            options={
                'verbose_name': 'Ligne inventaire',
                'verbose_name_plural': 'Lignes inventaires',
                'db_table': 'lignes_inventaires',
                'unique_together': {('inventaire', 'stock')},
            },
        ),
        migrations.CreateModel(
            name='SuiviTresorerie',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_suivi', models.DateField()),
                ('solde_caisse', models.DecimalField(decimal_places=2, max_digits=15)),
                ('solde_banque', models.DecimalField(decimal_places=2, max_digits=15)),
                ('solde_total', models.DecimalField(decimal_places=2, max_digits=15)),
                ('flux_entree_jour', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('flux_sortie_jour', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15)),
                ('notes', models.TextField(blank=True, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='suivis_tresorerie', to='core.entreprise')),
            ],
            options={
                'verbose_name': 'Suivi trésorerie',
                'verbose_name_plural': 'Suivis trésorerie',
                'db_table': 'suivis_tresorerie',
                'unique_together': {('entreprise', 'date_suivi')},
            },
        ),
        migrations.CreateModel(
            name='TauxChange',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date_taux', models.DateField()),
                ('taux', models.DecimalField(decimal_places=4, max_digits=10)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('devise_cible', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='taux_change_cible', to='core.devise')),
                ('devise_source', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='taux_change_source', to='core.devise')),
            ],
            options={
                'verbose_name': 'Taux de change',
                'verbose_name_plural': 'Taux de change',
                'db_table': 'taux_change_compta',
                'unique_together': {('devise_source', 'devise_cible', 'date_taux')},
            },
        ),
    ]
