# Generated by Django 5.2.7 on 2025-12-28 09:59

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0006_devise_configurationcnss_expatrie_permisvisa_and_more'),
        ('employes', '0007_add_apprentissage_contract_type'),
    ]

    operations = [
        migrations.CreateModel(
            name='CampagneEvaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('annee', models.IntegerField()),
                ('titre', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('date_debut', models.DateField()),
                ('date_fin', models.DateField()),
                ('statut', models.CharField(choices=[('preparation', 'En préparation'), ('en_cours', 'En cours'), ('cloturee', 'Clôturée'), ('annulee', 'Annulée')], default='preparation', max_length=20)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('entreprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campagnes_evaluation', to='core.entreprise')),
            ],
            options={
                'verbose_name': "Campagne d'évaluation",
                'verbose_name_plural': "Campagnes d'évaluation",
                'db_table': 'campagnes_evaluation',
                'ordering': ['-annee'],
                'unique_together': {('entreprise', 'annee')},
            },
        ),
        migrations.CreateModel(
            name='Evaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('statut', models.CharField(choices=[('brouillon', 'Brouillon'), ('auto_evaluation', 'Auto-évaluation'), ('evaluation_manager', 'Évaluation manager'), ('entretien', 'Entretien planifié'), ('validee', 'Validée'), ('annulee', 'Annulée')], default='brouillon', max_length=20)),
                ('date_entretien', models.DateField(blank=True, null=True)),
                ('note_objectifs', models.IntegerField(blank=True, choices=[(1, '1 - Insuffisant'), (2, '2 - À améliorer'), (3, '3 - Satisfaisant'), (4, '4 - Bon'), (5, '5 - Excellent')], null=True)),
                ('note_competences', models.IntegerField(blank=True, choices=[(1, '1 - Insuffisant'), (2, '2 - À améliorer'), (3, '3 - Satisfaisant'), (4, '4 - Bon'), (5, '5 - Excellent')], null=True)),
                ('note_comportement', models.IntegerField(blank=True, choices=[(1, '1 - Insuffisant'), (2, '2 - À améliorer'), (3, '3 - Satisfaisant'), (4, '4 - Bon'), (5, '5 - Excellent')], null=True)),
                ('note_globale', models.DecimalField(blank=True, decimal_places=1, max_digits=3, null=True)),
                ('points_forts', models.TextField(blank=True)),
                ('axes_amelioration', models.TextField(blank=True)),
                ('commentaire_employe', models.TextField(blank=True)),
                ('commentaire_evaluateur', models.TextField(blank=True)),
                ('plan_developpement', models.TextField(blank=True)),
                ('besoins_formation', models.TextField(blank=True)),
                ('souhait_evolution', models.TextField(blank=True)),
                ('proposition_augmentation', models.DecimalField(blank=True, decimal_places=2, help_text="Pourcentage d'augmentation proposé", max_digits=5, null=True)),
                ('date_creation', models.DateTimeField(auto_now_add=True)),
                ('date_modification', models.DateTimeField(auto_now=True)),
                ('date_validation', models.DateTimeField(blank=True, null=True)),
                ('campagne', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evaluations', to='employes.campagneevaluation')),
                ('employe', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evaluations_performance', to='employes.employe')),
                ('evaluateur', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evaluations_realisees', to='employes.employe')),
            ],
            options={
                'verbose_name': 'Évaluation de performance',
                'verbose_name_plural': 'Évaluations de performance',
                'db_table': 'evaluations_performance',
                'ordering': ['-campagne__annee', 'employe__nom'],
                'unique_together': {('campagne', 'employe')},
            },
        ),
        migrations.CreateModel(
            name='CompetenceEvaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('competence', models.CharField(max_length=200)),
                ('categorie', models.CharField(blank=True, max_length=100)),
                ('niveau_requis', models.IntegerField(choices=[(1, '1 - Non maîtrisé'), (2, "2 - En cours d'acquisition"), (3, '3 - Maîtrisé'), (4, '4 - Expert')], default=3)),
                ('niveau_actuel', models.IntegerField(blank=True, choices=[(1, '1 - Non maîtrisé'), (2, "2 - En cours d'acquisition"), (3, '3 - Maîtrisé'), (4, '4 - Expert')], null=True)),
                ('commentaire', models.TextField(blank=True)),
                ('evaluation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='competences', to='employes.evaluation')),
            ],
            options={
                'verbose_name': 'Compétence évaluée',
                'verbose_name_plural': 'Compétences évaluées',
                'db_table': 'competences_evaluation',
                'ordering': ['categorie', 'competence'],
            },
        ),
        migrations.CreateModel(
            name='ObjectifEvaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('intitule', models.CharField(max_length=300)),
                ('description', models.TextField(blank=True)),
                ('indicateurs', models.TextField(blank=True, help_text='Indicateurs de mesure')),
                ('priorite', models.CharField(choices=[('haute', 'Haute'), ('moyenne', 'Moyenne'), ('basse', 'Basse')], default='moyenne', max_length=10)),
                ('poids', models.IntegerField(default=100, help_text='Poids en pourcentage')),
                ('date_echeance', models.DateField(blank=True, null=True)),
                ('statut', models.CharField(choices=[('en_cours', 'En cours'), ('atteint', 'Atteint'), ('partiellement', 'Partiellement atteint'), ('non_atteint', 'Non atteint'), ('abandonne', 'Abandonné')], default='en_cours', max_length=20)),
                ('taux_realisation', models.IntegerField(default=0, help_text='Pourcentage de réalisation')),
                ('commentaire_employe', models.TextField(blank=True)),
                ('commentaire_evaluateur', models.TextField(blank=True)),
                ('evaluation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='objectifs', to='employes.evaluation')),
            ],
            options={
                'verbose_name': 'Objectif',
                'verbose_name_plural': 'Objectifs',
                'db_table': 'objectifs_evaluation',
                'ordering': ['-priorite', 'intitule'],
            },
        ),
    ]
